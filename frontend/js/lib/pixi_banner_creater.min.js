/*
 bannerCreater ver.0.0.2 author:Hans 2015-11-20 
*/
function bannerCreater(){function a(a,b){for(u=new PIXI.autoDetectRenderer(z,A),a.appendChild(u.view),v=new PIXI.autoDetectRenderer(B,C),b.appendChild(v.view),v.roundPixels=!0,y.selectMode(y.mode),G.addChild(J),G.addChild(L),x=new PIXI.Text("Alexia Ciannor & the Risen",F),x.filters=[P],x.x=5,x.y=C-x.height-3,k(),i=0;i<2;i++){var c=new PIXI.extras.BitmapText("",{font:"10px "+y.titleOption.fontFamily,tint:y.titleOption.color});c.filters=[P],N.addChild(c)}N.y=3,N.x=5,l(),M.texture=o(),M.rotation=-.2,M.x=-12,O.texture=new PIXI.Texture.fromFrame(Q),O.alpha=.4,O.y=C/2-O.height/2,O.x=-20,I.addChild(M),I.addChild(O),I.addChild(x),I.addChild(N),H.addChild(K),H.addChild(I),n()}function b(){J.texture=PIXI.loader.resources.actor.texture,K.texture=PIXI.loader.resources.actor.texture,K.x=-D.x,K.y=-D.y,n(),J.interactive=!0,J.on("mousedown",p).on("mouseup",q).on("mouseupoutside",q).on("mousemove",r)}function c(a){y.titleOption.text=a,l(),v.render(H)}function d(a){l(a),v.render(H)}function e(a){x.text=a,v.render(H)}function f(){return v.render(H),v.view.toDataURL("image/png")}function g(a,b){O.texture=new PIXI.Texture.fromFrame(a),E[0]=b,M.texture=o(),v.render(H)}function h(a){y.mode=a,0===a?(B=260,C=60,I.visible=!0):(B=120,C=120,I.visible=!1),v.resize(B,C),D.x=z/2-B/2,D.y=A/2-C/2,L.clear(),L.beginFill(3355443),L.drawRect(0,0,z,D.y),L.drawRect(0,D.y+C,z,D.y),L.drawRect(0,D.y,D.x,C),L.drawRect(z-D.x,D.y,D.x,C),L.endFill(),L.alpha=.7,K.x=-D.x+J.x,K.y=-D.y+J.y,n()}function j(){u.destroy(),v.destroy()}function k(){var a=null;for(var b in PIXI.extras.BitmapText.fonts)if(y.titleOption.fontFamily==b){a=!0;break}a||console.log('%cbtimap font error!! %cnot have font:"%c'+y.titleOption.fontFamily+'"',"color:red","color:black","color:green")}function l(a){var b=y.titleOption.text,c=["",""];if(b=b.split(" "),void 0===a){if(b.length>2)for(var d=0;d<b.length;d++)2>d?c[0]+=b[d]+" ":c[1]+=b[d]+" ";else if(2==b.length){for(var e=!1,f=0;f<b.length;f++)if(b[f].length>=7){e=!0;break}if(e)for(var g=0;g<b.length;g++)c[g]+=b[g];else for(var h=0;h<b.length;h++)c[0]+=b[h]+" "}else for(var i=0;i<b.length;i++)c[0]+=b[i]+" ";""===c[1]?(m(0,c),y.titleMode=0):(m(1,c),y.titleMode=1)}else switch(y.titleMode=a,a){case 0:for(var j=0;j<b.length;j++)2>j&&(c[j]+=b[j]+" ");m(1,c);break;case 1:for(var k=0;k<b.length;k++)2>k?c[0]+=b[k]+" ":c[1]+=b[k]+" ";m(1,c);break;case 2:for(var l=0;l<b.length;l++)c[0]+=b[l]+" ";m(0,c)}}function m(a,b){for(var c=0;2>c;c++)N.getChildAt(c).text=b[c];switch(a){case 0:for(var d=0;2>d;d++)N.getChildAt(d).font=y.titleOption.bigFontSize+"px "+y.titleOption.fontFamily;N.getChildAt(0).y=9;break;case 1:for(var e=0;2>e;e++)N.getChildAt(e).font=y.titleOption.smallFontSize+"px "+y.titleOption.fontFamily;N.getChildAt(1).y=N.getChildAt(0).height+2,N.getChildAt(1).x=N.getChildAt(0).width/2,N.getChildAt(0).y=0}}function n(){u.render(G),v.render(H)}function o(){return PIXI.Texture.Draw(function(a){var b=a.getContext("2d"),c=b.createLinearGradient(0,0,200,0);c.addColorStop(0,E[0]),c.addColorStop(.5,E[0]),c.addColorStop(1,E[1]),b.fillStyle=c,b.fillRect(0,0,B+40,2*C)})}function p(a){s(),this.data=a.data,this.dragging=!0,this.sx=this.data.getLocalPosition(this).x*this.scale.x,this.sy=this.data.getLocalPosition(this).y*this.scale.y}function q(){this.dragging=!1,cancelRequestAnimFrame(w),K.x=-D.x+this.position.x,K.y=-D.y+this.position.y,v.render(H),this.data=null}function r(){if(this.dragging){var a=this.data.getLocalPosition(this.parent);this.position.x=a.x-this.sx,this.position.y=a.y-this.sy}}function s(){w=requestAnimationFrame(s),u.render(G)}function t(a){for(var b=0;b<y.factions.length;b++)if(y.factions[b].title==a+".png"){E[0]=y.factions[b].color,Q=y.factions[b].title;break}}var u,v,w,x,y=this,z=320,A=320,B=0,C=0,D={x:0,y:0},E=["#999999","transparent"],F={font:"9px Arial",fill:"white"},G=new PIXI.Container,H=new PIXI.Container,I=new PIXI.Container,J=new PIXI.Sprite,K=new PIXI.Sprite,L=new PIXI.Graphics,M=new PIXI.Sprite,N=new PIXI.Container,O=new PIXI.Sprite,P=new PIXI.filters.DropShadowFilter,Q="convergence-of-cyriss.png";y.mode=0,y.titleMode=null,y.titleOption={fontFamily:"Templar",bigFontSize:28,smallFontSize:20,color:16777215,text:""},y.init=a,y.changeTitle=c,y.changeTitleMode=d,y.changeSubTitle=e,y.exportImg=f,y.changeFaction=g,y.selectMode=h,y.close=j,y.loadedActor=b,y.setFaction=t,y.factions=[{title:"convergence-of-cyriss.png",color:"#768788"},{title:"circle-orboros.png",color:"#888076"},{title:"cryx.png",color:"#798876"},{title:"cygnar.png",color:"#888876"},{title:"khador.png",color:"#aaaaaa"},{title:"legion-of-everblight.png",color:"#807688"},{title:"mercenaries.png",color:"#888676"},{title:"minions.png",color:"#7b8876"},{title:"skorne.png",color:"#888476"},{title:"the-protectorate-of-menoth.png",color:"#888176"},{title:"retribution-of-scyrah.png",color:"#808c89"},{title:"trollbloods.png",color:"#8b8a7b"}],P.color=3355443,P.alpha=1,P.blur=15,P.distance=3}PIXI.Texture.Draw=function(a){var b=document.createElement("canvas");return"function"==typeof a&&a(b),PIXI.Texture.fromCanvas(b)};